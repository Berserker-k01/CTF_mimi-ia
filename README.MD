# CTF_mimi ai - Agent Autonome pour Kali Linux

Un agent d'intelligence artificielle autonome conÃ§u pour participer Ã  des compÃ©titions CTF (Capture The Flag) en utilisant les outils de Kali Linux.

## ğŸ”¥ FonctionnalitÃ©s

- **Autonomie complÃ¨te** : L'agent prend des dÃ©cisions et exÃ©cute des actions sans intervention humaine
- **Utilisation des outils Kali** : IntÃ©gration avec nmap, gobuster, sqlmap, metasploit, etc.
- **Installation automatique** : Peut installer de nouveaux outils selon les besoins
- **AccÃ¨s web** : CapacitÃ© Ã  rechercher et analyser des informations en ligne
- **MÃ©moire persistante** : Stockage des informations dÃ©couvertes pour une utilisation future
- **Mode daemon** : Fonctionne en arriÃ¨re-plan comme un service systemd

## âš™ï¸ Architecture

L'agent est construit autour de plusieurs composants clÃ©s :

- **Core Agent** : Moteur de dÃ©cision basÃ© sur un LLM (Mistral, Llama, etc.)
- **Shell Controller** : Interface pour exÃ©cuter des commandes dans Kali Linux
- **Toolbox Interface** : Abstraction des outils de sÃ©curitÃ© courants
- **Memory/Brain** : Stockage persistant des informations et des rÃ©sultats
- **Terminal UI** : Interface utilisateur en ligne de commande
- **Autonomous Loop** : Boucle d'observation, dÃ©cision, action et Ã©valuation

## ğŸš€ Installation

```bash
# Cloner le dÃ©pÃ´t
git clone https://github.com/votre-username/ctf_mimi_ai.git
cd ctf_mimi_ai

# Installer les dÃ©pendances
pip install -r requirements.txt

# VÃ©rifier la compatibilitÃ© avec Kali Linux
python main.py --check-system
```

## ğŸ–¥ï¸ Utilisation

### Mode interactif

```bash
python main.py --target 192.168.1.100
```

### Mode daemon

```bash
# Installer le service systemd
sudo python main.py --install-service

# DÃ©marrer le service
sudo systemctl start ctf-mimi-ai
```

## ğŸ› ï¸ Structure du projet

```
ctf_mimi_ai/
â”œâ”€â”€ main.py                # Point d'entrÃ©e principal
â”œâ”€â”€ core/                  # Modules principaux
â”‚   â”œâ”€â”€ agent.py           # Agent et boucle autonome
â”‚   â”œâ”€â”€ shell_controller.py # ContrÃ´leur de shell
â”‚   â”œâ”€â”€ toolbox.py         # Interface des outils
â”‚   â”œâ”€â”€ memory.py          # Stockage et mÃ©moire
â”‚   â”œâ”€â”€ ui.py              # Interface utilisateur
â”‚   â””â”€â”€ llm_interface.py   # Interface avec le LLM
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ ctf_mimi_ai        # Lanceur CLI (installÃ© vers /usr/local/bin)
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ install_kali.sh    # Script d'installation sur Kali
â”‚   â””â”€â”€ uninstall_kali.sh  # Script de dÃ©sinstallation
â”œâ”€â”€ deploy/
â”‚   â””â”€â”€ ctf-mimi-ai.service # Service systemd
â”œâ”€â”€ data/                  # DonnÃ©es persistantes
â””â”€â”€ logs/                  # Journaux d'exÃ©cution
```

## ğŸ§© Installation comme application sur Kali Linux

PrÃ©requis: Kali Linux avec `python3`, `python3-venv`, `python3-pip`.

1) Cloner le projet sur Kali

```bash
git clone https://github.com/votre-username/ctf_mimi_ai.git
cd ctf_mimi_ai
```

2) Installer comme service systÃ¨me (root requis)

```bash
sudo bash scripts/install_kali.sh
```

Ce script va:
- Copier le projet vers `/opt/ctf_mimi_ai`
- CrÃ©er un venv et installer les dÃ©pendances
- Installer le service systemd `ctf-mimi-ai.service`
- Installer le lanceur CLI `/usr/local/bin/ctf_mimi_ai`

3) DÃ©marrer/arrÃªter le service

```bash
sudo systemctl start ctf-mimi-ai
sudo systemctl status ctf-mimi-ai
sudo journalctl -u ctf-mimi-ai -f
```

Pour arrÃªter/dÃ©sactiver:

```bash
sudo systemctl stop ctf-mimi-ai
sudo systemctl disable ctf-mimi-ai
```

4) Utiliser le lanceur CLI

```bash
ctf_mimi_ai --help
ctf_mimi_ai --target 192.168.1.100 --mode recon \
  --llm-model-type gpt-oss --llm-api-url http://127.0.0.1:1234/v1
```

5) DÃ©sinstallation

```bash
sudo bash scripts/uninstall_kali.sh
```

### Configuration du LLM local

Si votre LLM local expose une API compatible OpenAI sur `http://127.0.0.1:1234/v1`, utilisez:

```bash
ctf_mimi_ai --llm-model-type gpt-oss --llm-api-url http://127.0.0.1:1234/v1
```

Si lâ€™API nâ€™est pas compatible OpenAI, vous pouvez supprimer le suffixe `/v1` et lâ€™interface utilisera un format gÃ©nÃ©rique (`{"prompt": ...}`):

```bash
ctf_mimi_ai --llm-model-type gpt-oss --llm-api-url http://127.0.0.1:1234
```

### Utiliser un lien (URL) comme cible

Vous pouvez dÃ©finir une URL de challenge directement en cible. Lâ€™agent dÃ©tecte automatiquement les cibles HTTP/HTTPS et priorise un scan Web en phase de reconnaissance.

Exemples:

```bash
# Lancer en CLI sur une URL de challenge
ctf_mimi_ai --target https://chall.ctf.example.com --mode recon \
  --llm-model-type gpt-oss --llm-api-url http://127.0.0.1:1234/v1

# Cible avec port explicite
ctf_mimi_ai --target http://10.10.11.123:8080 --mode recon

# Depuis le repo sans installation systÃ¨me
python main.py --target https://chall.ctf.example.com --mode recon \
  --llm-model-type gpt-oss --llm-api-url http://127.0.0.1:1234/v1
```

Notes:

- Lâ€™URL est normalisÃ©e et stockÃ©e en base; lâ€™hÃ´te (`netloc`) est conservÃ©.
- En reconnaissance sur URL, lâ€™agent lance en premier un `web_scan` (par dÃ©faut `nikto`).
- Assurez-vous que les outils Web nÃ©cessaires (nikto, gobuster, wpscan, etc.) sont installÃ©s sur Kali.
- Pour des environnements non-OpenAI, utilisez `--llm-api-url http://127.0.0.1:1234` (sans `/v1`).